{% extends 'admin_base.html' %}
{% load static %}
{% block data %}

<div class="row-fluid sortable ui-sortable">
    <div class="box span11" style="">
        <div class="box-header">
            <h2><i class="halflings-icon white font"></i><span class="break"></span>Step1 Lora 配置使用说明</h2>
        </div>
        <div class="box-content">
            <div class="row-fluid">
                <div class="span10">
                    <p>1.确保已经开启的web服务，即执行打开【开启Web服务.bat】。</p>
                    <p>2.添加LoRA配置到
                        <button>
                            <a href="http://127.0.0.1/xadmin" target="_blank">本地admin管理后台</a>
                        </button>
                        之中。
                    </p>
                    <p>3.添加后的【Lora 中文备注】会自动显示在该页面的Lora下拉框。</p>
                    <p>4.确保【Lora SD标签】是点击LoRA在Stable Diffusion页面中的数据信息。</p>
                    <p>5.每次操作保存会覆盖掉之前的数据。</p>
                </div>
            </div>
            <div class="row-fluid sortable ui-sortable">
                <div class="box span12">
                    <div class="box-header" data-original-title="">
                        <h2><i class="halflings-icon white edit"></i><span class="break"></span>Lora数据部分，如果不需要无视</h2>
                    </div>
                    <div class="box-content">
                        <form class="form-horizontal" method="post" action="{% url 'New_Step_1_View'%}">
                            <div class="box-content">
                                <div id="DataTables_Table_0_wrapper" class="dataTables_wrapper" role="grid">
                                    <div class="row-fluid"></div>
                                    {% csrf_token %}
                                    <div class="control-group">
                                        <label class="control-label" for="focusedInput">选择Lora需要的项目名称</label>
                                        <div class="controls">
                                            <select name="task_id">
                                                {% for option in task_list %}
                                                <option value="{{ option.id }}">
                                                    {{ option.type}}/{{ option.en_name}}
                                                </option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>
                                    <h2>填写说明</h2>
                                    <p>1.人物姓名,默认【-】行表示不使用,如果有多个人用@符号分开，例如一个女性角色，【芳芳@她@阿姨】都表示同一个人的话，就输入`芳芳@她@阿姨`</p>
                                    <p>2.匹配LoRA下拉选择即可，如果没有请自行在后台
                                        <button>
                                            <a href="http://127.0.0.1/xadmin" target="_blank">本地admin管理后台</a>
                                        </button>
                                        添加。
                                    </p>
                                    <p>3.LoRA自定义描述，例如【1girl,long hair】，如果云后台
                                        <button>
                                            <a href="http://datayang.cn:9999/xadmin">云管理后台</a>
                                        </button>
                                        SD设置中选择的人物描述全自动可以不写。
                                    </p>
                                    <p>4.填写参考链接
                                        <button>
                                            <a href="https://www.bilibili.com/video/BV1Gh4y147st/">
                                                用于Stable Diffusion免费的AI绘画标签生成器
                                            </a>
                                        </button>
                                        。
                                    </p>
                                    <hr>
                                    <table class="table table-striped table-bordered bootstrap-datatable datatable dataTable"
                                           id="DataTables_Table_0" aria-describedby="DataTables_Table_0_info">
                                        <thead>
                                        <tr role="row">
                                            <th class="sorting_asc" role="columnheader" tabindex="0"
                                                aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-sort="ascending"
                                                aria-label="Username: activate to sort column descending"
                                                style="width: 249px;">
                                                人物姓名
                                            </th>
                                            <th class="sorting" role="columnheader" tabindex="0"
                                                aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Date registered: activate to sort column ascending"
                                                style="width: 363px;">匹配LoRA
                                            </th>
                                            <th class="sorting" role="columnheader" tabindex="0"
                                                aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Role: activate to sort column ascending"
                                                style="width: 207px;">
                                                自定义英文描述
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody role="alert" aria-live="polite" aria-relevant="all">
                                        <tr class="odd">
                                            <td class="sorting_1"><input type="text" name="name_1" value="-"></td>
                                            <td class="center">
                                                <select name="lora_1">
                                                    {% for option in lora_list %}
                                                    <option value="{{ option.lora_en_name }}">
                                                        {{option.lora_cn_name}}
                                                    </option>
                                                    {% endfor %}
                                                </select>
                                            </td>
                                            <td class="center"><input type="text" name="description_1"></td>
                                        </tr>
                                        <tr class="odd">
                                            <td class="sorting_1"><input type="text" name="name_2" value="-"></td>
                                            <td class="center">
                                                <select name="lora_2">
                                                    {% for option in lora_list %}
                                                    <option value="{{ option.lora_en_name }}">
                                                        {{ option.lora_cn_name }}
                                                    </option>
                                                    {% endfor %}
                                                </select>
                                            </td>
                                            <td class="center"><input type="text" name="description_2"></td>
                                        </tr>
                                        <tr class="odd">
                                            <td class="sorting_1"><input type="text" name="name_3" value="-"></td>
                                            <td class="center">
                                                <select name="lora_3">
                                                    {% for option in lora_list %}
                                                    <option value="{{ option.lora_en_name }}">
                                                        {{ option.lora_cn_name}}
                                                    </option>
                                                    {% endfor %}
                                                </select>
                                            </td>
                                            <td class="center"><input type="text" name="description_3"></td>
                                        </tr>
                                        <tr class="odd">
                                            <td class="sorting_1"><input type="text" name="name_4" value="-"></td>
                                            <td class="center">
                                                <select name="lora_4">
                                                    {% for option in lora_list %}
                                                    <option value="{{ option.lora_en_name }}">
                                                        {{option.lora_cn_name}}
                                                    </option>
                                                    {% endfor %}
                                                </select>
                                            </td>
                                            <td class="center"><input type="text" name="description_4"></td>
                                        </tr>
                                        <tr class="odd">
                                            <td class="sorting_1"><input type="text" name="name_5" value="-"></td>
                                            <td class="center">
                                                <select name="lora_5">
                                                    {% for option in lora_list %}
                                                    <option value="{{ option.lora_en_name }}">
                                                        {{ option.lora_cn_name }}
                                                    </option>
                                                    {% endfor %}
                                                </select>
                                            </td>
                                            <td class="center"><input type="text" name="description_5"></td>
                                        </tr>
                                        <tr class="odd">
                                            <td class="sorting_1"><input type="text" name="name_6" value="-"></td>
                                            <td class="center">
                                                <select name="lora_6">
                                                    {% for option in lora_list %}
                                                    <option value="{{ option.lora_en_name }}">
                                                        {{ option.lora_cn_name }}
                                                    </option>
                                                    {% endfor %}
                                                </select>
                                            </td>
                                            <td class="center"><input type="text" name="description_6"></td>
                                        </tr>
                                        <tr class="odd">
                                            <td class="sorting_1"><input type="text" name="name_7" value="-"></td>
                                            <td class="center">
                                                <select name="lora_7">
                                                    {% for option in lora_list %}
                                                    <option value="{{ option.lora_en_name }}">
                                                        {{ option.lora_cn_name }}
                                                    </option>
                                                    {% endfor %}
                                                </select>
                                            </td>
                                            <td class="center"><input type="text" name="description_7"></td>
                                        </tr>
                                        <tr class="odd">
                                            <td class="sorting_1"><input type="text" name="name_8" value="-"></td>
                                            <td class="center">
                                                <select name="lora_8">
                                                    {% for option in lora_list %}
                                                    <option value="{{ option.lora_en_name }}">
                                                        {{ option.lora_cn_name }}
                                                    </option>
                                                    {% endfor %}
                                                </select>
                                            </td>
                                            <td class="center"><input type="text" name="description_8"></td>
                                        </tr>
                                        <tr class="odd">
                                            <td class="sorting_1"><input type="text" name="name_9" value="-"></td>
                                            <td class="center">
                                                <select name="lora_9">
                                                    {% for option in lora_list %}
                                                    <option value="{{ option.lora_en_name }}">
                                                        {{ option.lora_cn_name }}
                                                    </option>
                                                    {% endfor %}
                                                </select>
                                            </td>
                                            <td class="center"><input type="text" name="description_9"></td>
                                        </tr>
                                        <tr class="odd">
                                            <td class="sorting_1"><input type="text" name="name_10" value="-"></td>
                                            <td class="center">
                                                <select name="lora_10">
                                                    {% for option in lora_list %}
                                                    <option value="{{ option.lora_en_name }}">
                                                        {{ option.lora_cn_name }}
                                                    </option>
                                                    {% endfor %}
                                                </select>
                                            </td>
                                            <td class="center"><input type="text" name="description_10"></td>
                                        </tr>
                                        </tbody>
                                    </table>
                                    <button type="submit" class="btn btn-primary">保存Lora配置</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row-fluid sortable ui-sortable">
    <div class="box span11" style="">
        <div class="box-header">
            <h2><i class="halflings-icon white font"></i><span class="break"></span>黄金5秒文案使用说明</h2>
        </div>
        <div class="box-content">
            <div class="row-fluid">
                <div class="span10">
                    <p>1.确保已经开启的web服务，即执行打开【开启Web服务.bat】。</p>
                    <p>2.添加文案到
                        <button>
                            <a href="http://127.0.0.1/xadmin" target="_blank">本地admin管理后台</a>
                        </button>
                        之中。
                    </p>
                    <p>3.需要配置好GPT部分。</p>
                    <p>4.点击黄金文案生成</p>
                    <p>5.根据自己的需要修改选择黄金开头文案，然后点击后面的保存。</p>
                    <p>6.每次操作保存会覆盖掉之前的数据。</p>

                </div>
            </div>
            <div class="row-fluid sortable ui-sortable">
                <div class="box span12">
                    <div class="box-header" data-original-title="">
                        <h2><i class="halflings-icon white edit"></i><span class="break"></span>黄金文案配置</h2>
                    </div>
                    <div class="box-content">
                        <form class="form-horizontal" method="get" action="{% url 'New_Step_1_1_View'%}">
                            {% csrf_token %}
                            <div class="box-content">
                                <div id="DataTables_Table_0_wrapper" class="dataTables_wrapper" role="grid">
                                    <div class="row-fluid"></div>
                                    <div class="control-group">
                                        <label class="control-label" for="focusedInput">黄金文案文章选择</label>
                                        <div class="controls">
                                            <select name="task_id">
                                                {% for option in task_list %}
                                                <option value="{{ option.id }}" name="task_id">
                                                    {{ option.type}}/{{ option.en_name}}
                                                </option>
                                                {% endfor %}
                                            </select>
                                            <button type="submit">生成黄金5秒文案</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="row-fluid sortable ui-sortable">
                <div class="box span12">
                    <div class="box-header" data-original-title="">
                        <h2><i class="halflings-icon white edit"></i><span class="break"></span>黄金文案配置</h2>
                    </div>
                    <div class="box-content">
                        <form class="form-horizontal" method="post" action="{% url 'New_Step_1_1_View'%}">
                            <div class="box-content">
                                <div id="DataTables_Table_0_wrapper" class="dataTables_wrapper" role="grid">
                                    <div class="row-fluid"></div>
                                </div>
                            </div>
                            <div id="DataTables_Table_0_wrapper" class="dataTables_wrapper" role="grid">
                                <div class="row-fluid">
                                </div>
                                <table class="table table-striped table-bordered bootstrap-datatable datatable dataTable"
                                       id="DataTables_Table_0" aria-describedby="DataTables_Table_0_info">
                                    <thead>
                                    <tr role="row">
                                        <th class="sorting_asc" role="columnheader" tabindex="0"
                                            aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                            aria-sort="ascending"
                                            aria-label="Username: activate to sort column descending"
                                            style="width: 249px;">
                                            任务ID
                                        </th>
                                        <th class="sorting_asc" role="columnheader" tabindex="0"
                                            aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                            aria-sort="ascending"
                                            aria-label="Username: activate to sort column descending"
                                            style="width: 249px;">
                                            描述
                                        </th>
                                        <th class="sorting" role="columnheader" tabindex="0"
                                            aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                            aria-label="Actions: activate to sort column ascending"
                                            style="width: 422px;">
                                            Actions
                                        </th>
                                    </tr>
                                    </thead>
                                    <tbody role="alert" aria-live="polite" aria-relevant="all">
                                    </tbody>
                                    {% for each in json_content_start%}
                                    <form method="POST" action="{%url 'New_Step_1_1_View'%}">
                                        {% csrf_token %}
                                        <tr class="odd">
                                            <td class="sorting_1">
                                                <textarea readonly name="task_id_" rows="2">{{task_data.id}}</textarea>
                                            </td>
                                            <td class="sorting_1">
                                                <textarea name="content_start" rows="2">{{each}}</textarea>
                                            </td>
                                            <td class="buttons-vertical">
                                                <button type="submit" class="btn btn-primary">数据保存</button>
                                            </td>
                                        </tr>
                                    </form>
                                    {% endfor %}

                                </table>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    // 获取表格对象
    var table = document.getElementById("DataTables_Table_0");
    // 获取描述列所在的索引
    var columnIndex = 0; // 假设描述列是第一列，索引为0
    // 将表格的行转换为数组
    var rows = Array.from(table.getElementsByTagName("tr"));
    // 排除表头行
    var dataRows = rows.slice(0);
    // 根据描述列的值进行排序
    dataRows.sort(function (a, b) {
        var valueA = a.getElementsByTagName("td")[columnIndex].textContent;
        var valueB = b.getElementsByTagName("td")[columnIndex].textContent;
        return valueA.localeCompare(valueB, undefined, {numeric: true, sensitivity: 'base'});
    });
    // 清空表格内容
    while (table.rows.length > 0) {
        table.deleteRow(0);
    }
    // 将排序后的行重新添加到表格中
    dataRows.forEach(function (row) {
        table.appendChild(row);
    });
</script>
{% endblock %}


